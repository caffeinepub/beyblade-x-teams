{
  "kind": "build_request",
  "title": "Fix maximum call stack size exceeded error",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Identify and fix the infinite recursion or circular dependency causing the maximum call stack size exceeded error in the application",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-user-final"
        ]
      },
      "acceptanceCriteria": [
        "Application loads without throwing maximum call stack exceeded errors",
        "All React components render successfully without infinite loops",
        "React Query hooks do not trigger infinite refetch cycles",
        "useCallback and useMemo dependencies are correctly specified to prevent unnecessary re-renders"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Review and fix any circular dependencies in React Query hook invalidation patterns, particularly in team-related mutations that may be triggering cascading invalidations",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-final"
        ]
      },
      "acceptanceCriteria": [
        "Query invalidation after mutations does not create circular refetch loops",
        "Team data queries (useTeamQuery, useCurrentTeam, useMyTeams) do not trigger each other infinitely",
        "Mutation success handlers properly scope their invalidations to prevent cascading effects"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Check TeamDetailPage component for infinite loop issues in useMemo dependencies, particularly around isCurrentUserLeader and isCurrentUserMember calculations",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-final"
        ]
      },
      "acceptanceCriteria": [
        "TeamDetailPage renders without causing stack overflow",
        "useMemo hooks have stable dependency arrays that do not change on every render",
        "Derived state calculations do not trigger re-renders that recalculate themselves"
      ]
    }
  ],
  "constraints": [
    "Preserve existing functionality while fixing the stack overflow issue",
    "Do not modify authentication or Internet Identity integration"
  ],
  "nonGoals": [
    "Adding new features",
    "Changing the UI design or layout",
    "Modifying backend data models"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}